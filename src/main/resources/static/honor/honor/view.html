<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>荣誉资质管理系统</title>

    <link rel="shortcut icon" href="favicon.ico"> <link href="/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">

    <!-- Data Tables -->
    <link href="/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">

    <link href="/css/animate.min.css" rel="stylesheet">
    <link href="/css/style.min.css?v=4.1.0" rel="stylesheet">
    <link href="/css/plugins/layui/css/layui.css?v=4.1.0" rel="stylesheet">
    <style>
        .hr-line-dashed{border-top:1px dashed rgb(74 82 90)}
        .col-sm-1, .col-sm-2{padding-left: 0;}
    </style>
</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">

                    <div class="ibox-content">
                        <div class="form-horizontal">
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">编号</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="serialNumber"></p>
                                </div>
                                <label class="col-sm-1 control-label">状态</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="statusName"></p>
                                </div>

                            </div>
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">录入人</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="creater"></p>
                                </div>
                                <label class="col-sm-1 control-label">录入时间</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="createTime"></p>
                                </div>
                                <label class="col-sm-1 control-label">最近更新人</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="modifier"></p>
                                </div>
                                <label class="col-sm-1 control-label">最近更新时间</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="modifyTime"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5 style="font-weight: 800">丨资源信息</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>

                    <div class="ibox-content">
                        <div class="form-horizontal">
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">资源分类</label>
                                <div class="col-sm-2">
                                    <p class="form-control-static" id="honorCategory"></p>
                                </div>

                                <label class="col-sm-1 control-label">资源全称</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="honorName"></p>
                                </div>
                                <label class="col-sm-1 control-label">资源别名/简称</label>

                                <div class="col-sm-1">
                                    <p class="form-control-static" id="honorAlias"></p>
                                </div>
                                <label class="col-sm-2 control-label">所属单位/个人</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="honorOrganization"></p>
                                </div>

                            </div>
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">区域级别</label>

                                <div class="col-sm-1">
                                    <p class="form-control-static" id="honorLevel"></p>
                                </div>
                                <label class="col-sm-2 control-label">重要程度</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="honorGrade"></p>
                                </div>

                                <label class="col-sm-1 control-label">获取时间</label>
                                <div class="col-sm-2">
                                    <p class="form-control-static" id="getDate"></p>
                                </div>

                                <label class="col-sm-1 control-label">是否长期有效</label>
                                <div class="col-sm-2">
                                    <p class="form-control-static" id="validStatus"></p>
                                </div>
                            </div>
                            <div id="expireDateDiv" style="display: none">
                                <div class="form-group" >
                                    <label class="col-sm-1 control-label">到期时间</label>

                                    <div class="col-sm-1">
                                        <p class="form-control-static" id="expireDate"></p>
                                    </div>
                                    <label class="col-sm-2 control-label">下一次复评时间</label>

                                    <div class="col-sm-2">
                                        <p class="form-control-static" id="auditDate"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">评选部门</label>

                                <div class="col-sm-1">
                                    <p class="form-control-static" id="appraiseDept"></p>
                                </div>
                                <label class="col-sm-2 control-label">评选部门联系人</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="appraiseDeptContactPerson"></p>
                                </div>
                                <label class="col-sm-1 control-label">评选部门联系人职位</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="appraiseDeptContactPersonPosition"></p>
                                </div>

                                <label class="col-sm-1 control-label">评选部门联系方式</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="appraiseDeptContact"></p>
                                </div>
                            </div>

                            <div class="form-group" >
                                <label class="col-sm-1 control-label">颁发部门</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="issuingDept"></p>
                                </div>
                                <label class="col-sm-1 control-label">颁发部门联系人</label>

                                <div class="col-sm-2" >
                                    <p class="form-control-static" id="issuingDeptContactPerson"></p>
                                </div>
                                <label class="col-sm-1 control-label">颁发部门联系人职位</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="issuingDeptContactPersonPosition"></p>
                                </div>

                                <label class="col-sm-1 control-label">颁发部门联系方式</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="issuingDeptContact"></p>
                                </div>
                            </div>


                            <div class="hr-line-dashed"></div>
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">申请部门</label>

                                <div class="col-sm-1">
                                    <p class="form-control-static" id="applicantDept"></p>
                                </div>
                                <label class="col-sm-2 control-label">申请人</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="applicant"></p>
                                </div>
                                <label class="col-sm-1 control-label">维护部门</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="maintainerDept"></p>
                                </div>
                                <label class="col-sm-1 control-label">维护人</label>

                                <div class="col-sm-2">
                                    <p class="form-control-static" id="maintainer"></p>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">用途</label>
                                <div class="col-sm-11">
                                    <p class="form-control-static" id="purpose"></p>
                                </div>
                            </div>
                            <div class="form-group" >
                                <label class="col-sm-1 control-label">备注</label>
                                <div class="col-sm-11">
                                    <p class="form-control-static" id="remark"></p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5 style="font-weight: 800">丨电子档案</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="example">
                                    <table id="tableFromData" data-mobile-responsive="true">
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- End Panel Basic -->
    </div>
<!--    <div class="modal-backdrop in" id="mask-div" onclick="hideModal()"></div>-->
    <script src="/js/jquery.min.js?v=2.1.4"></script>
    <script src="/js/common.js"></script>
    <script src="/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="/js/content.min.js?v=1.0.0"></script>
    <script src="/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <!--<script src="/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>-->
    <script src="/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<!--    <script type="text/javascript" src="/js/plugins/layer-v3.5.1/layer/layer.js"></script>-->
    <script type="text/javascript" src="/css/plugins/layui/layui.js"></script>
    <script>
        var id = getUrlParams("id");
        var uuid = getUrlParams("uuid");
        function switchValidStatus(status) {
            if(status==1){
                $('#expireDateDiv').hide();
            }else {
                $('#expireDateDiv').show();
            }
        }
        $.get("/honorManage/"+id, function(data){
            if(data.code==200){
                var result = data.result;
                $('#honorName').text(result.honorName);
                $('#honorAlias').text(result.honorAlias);
                // $('#honorType').text(result.honorType);
                $('#honorCategory').text(result.honorCategory);
                $('#honorOrganization').text(result.honorOrganization);
                $('#honorLevel').text(result.honorLevel);
                $('#honorGrade').text(result.honorGrade);
                $('#appraiseDept').text(result.appraiseDept);
                $('#appraiseDeptContact').text(result.appraiseDeptContact);
                $('#issuingDept').text(result.issuingDept);
                $('#issuingDeptContact').text(result.issuingDeptContact);
                $('#getDate').text(result.getDate);
                if(result.validStatus==0){
                    $('#validStatus').append('<span class="label label-info">非长期有效</span>');
                }else{
                    $('#validStatus').append('<span class="label label-info">长期有效</span>');
                }
                switchValidStatus(result.validStatus);
                $('#expireDate').text(result.expireDate);
                $('#auditDate').text(result.auditDate);
                $('#applicantDept').text(result.applicantDept);
                $('#applicant').val(result.applicant);
                $('#maintainerDept').text(result.maintainerDept);
                $('#maintainer').text(result.maintainer);
                $('#purpose').text(result.purpose);
                $('#remark').text(result.remark);
                switchValidStatus(result.validStatus);
                $('#serialNumber').text(result.serialNumber);
                $('#createTime').text(result.createTime);
                $('#modifyTime').text(result.modifyTime);
                $('#creater').text(result.creater);
                $('#modifier').text(result.modifier);
                var statusName;
                if(result.statusName=='有效'){
                    statusName = '<span class="label label-info">'+result.statusName+'</span>';
                }else if(result.statusName=='即将到期'){
                    statusName = '<span class="label label-warning">'+result.statusName+'</span>';
                }else if(result.statusName=='已失效'){
                    statusName = '<span class="label label-danger">'+result.statusName+'</span>';
                }else {
                    statusName = '<span class="label">'+result.statusName+'</span>';
                }
                $('#statusName').append(statusName);

                $('#appraiseDeptContactPerson').text(result.appraiseDeptContactPerson);
                $('#appraiseDeptContactPersonPosition').text(result.appraiseDeptContactPersonPosition);
                $('#issuingDeptContactPerson').text(result.issuingDeptContactPerson);
                $('#issuingDeptContactPersonPosition').text(result.issuingDeptContactPersonPosition);

            }

        });
        $("#tableFromData").bootstrapTable({
            url: '/homePage?limit=10&honorId='+uuid+'&sortField=createTime&sortOrder=descend',
            method: 'get',
            dataType: 'json',
            search: false,
            pagination: true,
            sidePagination:'server',//指定服务器端分页
            pageSize:5,//单页记录数
            pageList:[10,20,30,40],//分页步进值
            showRefresh: false,
            showToggle: false,
            showColumns: false,
            iconSize: "outline",
            toolbar: "#tableFromDataToolbar",
            icons: {
                refresh: "glyphicon-repeat",
                toggle: "glyphicon-list-alt",
                columns: "glyphicon-list"
            },
            columns: [{
                field: '',
                title: '序号',
                align: 'center',
                formatter: function (value, row, index) {
                    return index + 1;
                }
            },{
                field: 'archivesName',
                title: '名称',
                align: 'center'
            },{
                field: 'serialNumber',
                title: '编号',
                align: 'center'
            },{
                field: 'storageLocation',
                title: '原件存放位置',
                align: 'center'
            },{
                field: 'fileId',
                title: '链接',
                align: 'center',
                formatter: function (value, row, index) {
                    var url = "http://"+window.location.host+"/file/"+value;
                    return '<a href="'+url+'" target="blank" style="text-decoration: underline;color: #0000CC;">'+url+'</a>';
                }
            },{
                field: 'remark',
                title: '备注',
                align: 'center'
            }]
        })
        function getUrlParams(key) {
            var url = window.location.search.substr(1);
            if (url == '') {
                return false;
            }
            var paramsArr = url.split('&');
            for (var i = 0; i < paramsArr.length; i++) {
                var combina = paramsArr[i].split("=");
                if (combina[0] == key) {
                    return combina[1];
                }
            }
            return false;
        }
    </script>

</body>
</html>
